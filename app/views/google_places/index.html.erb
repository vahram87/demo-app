<!-- app/views/google_places/index.html.erb -->
<div class="mb-6">
  <%= render "shared/places_search" %>
</div>

<div class="flex items-center justify-between mb-6">
  <h1 class="text-2xl font-semibold text-gray-900">Google places</h1>
  <%= link_to "New place",
      new_google_place_path,
      class: "inline-flex items-center rounded-md bg-teal-600 px-4 py-2 text-white hover:bg-teal-700" %>
</div>

<% if @google_places.any? %>
  <div class="overflow-x-auto bg-white shadow-sm ring-1 ring-gray-200 rounded-lg">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Title</th>
          <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Address</th>
          <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Short address</th>
          <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Latitude</th>
          <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Longitude</th>
          <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Rating</th>
          <th scope="col" class="py-3.5 pl-3 pr-4 sm:pr-6 text-right text-sm font-semibold text-gray-900">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200 bg-white">
        <% @google_places.each do |place| %>
          <tr class="hover:bg-gray-50">
            <!-- Title -->
            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-700">
              <%= link_to (place.title.presence || "(untitled)"),
                          google_place_path(place),
                          class: "text-teal-700 hover:underline" %>
            </td>

            <!-- Address -->
            <td class="px-3 py-4 text-sm text-gray-700">
              <%= place.address.presence || "-" %>
            </td>

            <!-- Short address -->
            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-700">
              <%= place.short_address.presence || "-" %>
            </td>

            <!-- Latitude -->
            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-700 tabular-nums">
              <%= place.latitude.present? ? sprintf("%.6f", place.latitude) : "-" %>
            </td>

            <!-- Longitude -->
            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-700 tabular-nums">
              <%= place.longitude.present? ? sprintf("%.6f", place.longitude) : "-" %>
            </td>

            <!-- Rating -->
            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-700">
              <%= place.rating.present? ? place.rating : "-" %>
            </td>

            <!-- Actions -->
            <td class="whitespace-nowrap py-4 pl-3 pr-4 text-sm text-right sm:pr-6">
              <div class="inline-flex items-center gap-1">
                <%= link_to "Show", google_place_path(place),
                            class: "px-2 py-1 rounded-md text-gray-700 hover:bg-gray-100" %>
                <%= link_to "Edit", edit_google_place_path(place),
                            class: "px-2 py-1 rounded-md text-teal-700 hover:bg-teal-50" %>
                <%= button_to "Delete", google_place_path(place),
                              method: :delete,
                              data: { turbo_confirm: "Are you sure?" },
                              form: { class: "inline" },
                              class: "px-2 py-1 rounded-md text-red-700 hover:bg-red-50" %>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <div class="rounded-lg border border-dashed border-gray-300 p-12 text-center">
    <h3 class="mt-2 text-sm font-semibold text-gray-900">No places</h3>
    <p class="mt-1 text-sm text-gray-500">Get started by adding your first place.</p>
    <div class="mt-6">
      <%= link_to "New place",
          new_google_place_path,
          class: "inline-flex items-center rounded-md bg-teal-600 px-4 py-2 text-white hover:bg-teal-700" %>
    </div>
  </div>
<% end %>
