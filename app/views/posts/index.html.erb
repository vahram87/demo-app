<div class="flex items-center justify-between mb-6">
  <h1 class="text-2xl font-semibold text-gray-900">Posts</h1>
  <%= link_to "New post",
              new_post_path,
              class: "inline-flex items-center rounded-md bg-teal-600 px-4 py-2 text-white hover:bg-teal-700" %>
</div>

<% if @posts.any? %>
  <div class="overflow-x-auto bg-white shadow-sm ring-1 ring-gray-200 rounded-lg">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Title</th>
          <th scope="col" class="hidden sm:table-cell px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Excerpt</th>
          <th scope="col" class="hidden md:table-cell px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Created</th>
          <th scope="col" class="py-3.5 pl-3 pr-4 sm:pr-6 text-right text-sm font-semibold text-gray-900">Actions</th>
        </tr>
      </thead>

      <tbody class="divide-y divide-gray-200 bg-white">
        <% @posts.each do |post| %>
          <tr class="hover:bg-gray-50">
            <!-- Title (+ mobile excerpt) -->
            <td class="px-3 py-4 align-top">
              <div class="text-sm font-medium text-gray-900">
                <%= link_to (post.title.presence || "Untitled"), post_path(post), class: "text-teal-700 hover:underline" %>
              </div>
              <div class="mt-1 text-xs text-gray-500 sm:hidden">
                <%= truncate(post.content.to_s, length: 80) %>
              </div>
            </td>

            <!-- Excerpt (hidden on small) -->
            <td class="hidden sm:table-cell px-3 py-4 align-top text-sm text-gray-700">
              <%= truncate(post.content.to_s, length: 120) %>
            </td>

            <!-- Created at (hidden on small/medium) -->
            <td class="hidden md:table-cell px-3 py-4 align-top text-sm text-gray-600">
              <time datetime="<%= post.created_at.iso8601 %>">
                <%= l(post.created_at, format: :short) %>
              </time>
            </td>

            <!-- Actions -->
            <td class="whitespace-nowrap py-4 pl-3 pr-4 text-sm text-right sm:pr-6">
              <div class="inline-flex items-center gap-1">
                <%= link_to "Show",
                            post_path(post),
                            class: "px-2 py-1 rounded-md text-gray-700 hover:bg-gray-100" %>

                <%= link_to "Edit",
                            edit_post_path(post),
                            data: { turbo_frame: "dialog_content" },
                            class: "px-2 py-1 rounded-md text-teal-700 hover:bg-teal-50" %>

                <%= button_to "Delete",
                              post_path(post),
                              method: :delete,
                              data: { turbo_confirm: "Are you sure?" },
                              form: { class: "inline" },
                              class: "px-2 py-1 rounded-md text-red-700 hover:bg-red-50" %>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <!-- Empty state -->
  <div class="rounded-lg border border-dashed border-gray-300 p-12 text-center">
    <h3 class="mt-2 text-sm font-semibold text-gray-900">No posts</h3>
    <p class="mt-1 text-sm text-gray-500">Get started by creating your first post.</p>
    <div class="mt-6">
      <%= link_to "New post",
                  new_post_path,
                  class: "inline-flex items-center rounded-md bg-teal-600 px-4 py-2 text-white hover:bg-teal-700" %>
    </div>
  </div>
<% end %>
